pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
	iplr()--init player
end

function _update60()
	uplr() --update player
end

function _draw()
	cls()
	map()
	dplr() --draw player
end
-->8
---init player---
function iplr()
	plr ={
		x=10,
		y=10,
		speed=0.5,
		gravity=0.8,
		jump_power=-30
	}
end

---update player---
function uplr()
	move(plr)
	apply_gravity(plr)
end


function dplr()
spr(1,plr.x,plr.y)
end
-->8
---move---
function move(o)
	local lx = o.x --last position
	local ly = o.y
	local originalspeed = o.speed
	
	if btnp(❎) and onground(o) then
  o.y -= 1  -- dれたcalez lれたgれそrement le personnage vers le haut pour れたviter les collisions immれたdiates
  o.y += o.jump_power
 end

	
	if (btn(➡️)) o.x += o.speed
	if (btn(⬅️)) o.x -= o.speed
	
	
	if collide(o) then
		o.x = lx
		o.y = ly
		o.speed=originalspeed
	end

	--if btnp(❎)then
		--if onground(o) then
		--	o.y += o.jump_power
	--	end
	--end
end

-->8
---gravity---
function apply_gravity(o)
    o.y += o.gravity
    if collide(o) then
        o.y -= o.gravity  -- annule la gravitれた en cas de collision
    end
end
-->8
---collision---
function collide(o) 
	local x1 = (o.x/8)
	local y1 = (o.y/8)
	local x2 = (o.x+7)/8
	local y2 = (o.y+7)/8
	
	local a = fget(mget(x1,y1),0)
	local b = fget(mget(x1,y2),0)
	local c = fget(mget(x2,y2),0)
	local d = fget(mget(x2,y1),0)
	
	if a or b or c or d then
		return true ---return
	else
	 return false
	end
end


function onground(o)
	local a = fget(mget((o.x+4)/8,(o.y+9)/8),0)
	if a then
		return true
	end
end
__gfx__
00000000001111005555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001881005dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700001881105d6666d500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000001110005d6116d500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000011e11005d6116d500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700001e10005d6666d500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001110005dddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001010005555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000202020200000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000020200000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000002020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000030303000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000002020202000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
